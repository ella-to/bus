version: "3.5"

services:
  bus:
    image: ellato/bus:latest
    # build: .

    environment:
      - BUS_ADDR=0.0.0.0:2021
      - BUS_LOG_LEVEL=INFO
      - BUS_STORAGE_POOL_SIZE=10
      - BUS_STORAGE_PATH=
      - BUS_CONSUMER_QUEUE_SIZE=1000
      - BUS_INCOMING_EVENTS_BUFFER_SIZE=100000
      - BUS_ACK_TICK_TIMEOUT=5s
      - BUS_ACK_TICK_SIZE=100
      - BUS_EVENTS_DELETE_INTERVAL=10s

    ports:
      - "2021:2021"

    # make sure to use the right network
    networks:
      - bus

    volumes:
      - ./storage:/storage

networks:
  bus:
    name: bus_net
    driver: bridge